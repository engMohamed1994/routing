<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Navigation App</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet-routing-machine/dist/leaflet-routing-machine.css" />
    <style>
        body, html {
            height: 100%;
            margin: 0;
            display: flex;
            flex-direction: column;
        }
        #map { height: 100%; flex-grow: 1; }
        #controls {
            padding: 10px;
            background: #f8f9fa;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            z-index: 1000;
                        const destLatLng = L.latLng(data[0].lat, data[0].lon);

                        L.Routing.control({
                            waypoints: [
                                userLocation,
                                destLatLng
                            ],
                            routeWhileDragging: true,
                            showAlternatives: true,
                            altLineOptions: {
                                styles: [
                                    { color: 'black', opacity: 0.15, weight: 9 },
                                    { color: 'white', opacity: 0.8, weight: 6 },
                                    { color: 'blue', opacity: 0.5, weight: 2 }
                                ]
                            },
                            createMarker: function(i, waypoint, n) {
                                var marker = L.marker(waypoint.latLng).bindPopup(`Stop ${i + 1}`);
                                return marker;
                            }
                        }).addTo(map);
                    })
                    .catch(error => {
                        console.error("Error fetching address:", error);
                        alert("Error fetching address.");
                    });
            });

            document.getElementById('saveRouteButton').addEventListener('click', () => {
                const destination = document.getElementById('destination').value;
                if (destination) {
                    localStorage.setItem('favoriteRoute', destination);
                    alert("Route saved!");
                } else {
                    alert("Please enter a destination to save.");
                }
            });

            document.getElementById('loadRouteButton').addEventListener('click', () => {
                const savedRoute = localStorage.getItem('favoriteRoute');
                if (savedRoute) {
                    document.getElementById('destination').value = savedRoute;
                    alert("Route loaded!");
                } else {
                    alert("No saved route found.");
                }
            });

            const trafficLayer = L.tileLayer('https://traffic.api.hypothetical.com/{z}/{x}/{y}.png', {
                maxZoom: 18,
                opacity: 0.7
            });

            // document.getElementById('showTrafficButton').addEventListener('click', function() {
            //     if (map.hasLayer(trafficLayer)) {
            //         map.removeLayer(trafficLayer);
            //         this.textContent = "Show Traffic";
            //     } else {
            //         map.addLayer(trafficLayer);
            //         this.textContent = "Hide Traffic";
            //     }
            // });
        });
    </script>
</body>
</html>
